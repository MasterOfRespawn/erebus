#VRML_SIM R2022b utf8

EXTERNPROTO "https://raw.githubusercontent.com/cyberbotics/webots/50c3f419b5da49a2af606297049ee91e8adbc92e/projects/objects/apartment_structure/protos/Wall.proto"

PROTO custom-room4 [
	field SFInt32			 X							  0
	field SFInt32			 Y							  0
	field SFInt32			 DIR						  0						   # [0, 1, 2, 3] = [N, E, S, W]
	field SFFloat 			 width 						  7.0
	field SFFloat 			 height 					  8.0
	field SFFloat 			 xScale 					  0.4
    field SFFloat 			 zScale 					  0.4
    field SFFloat 			 yScale 					  0.4
	field SFFloat 			 area4Width 				  7.0
	field SFFloat 			 area4Height 				  5.0
]
{
# IMPORTANT: translation 0 0 0 must be tile 0 of room 4
Solid {
  %{
	xStart = -(fields.width.value * (0.3 * fields.xScale.value) / 2.0)
	zStart = -(fields.height.value * (0.3 * fields.zScale.value) / 2.0)
	xRelPos = fields.X.value * 0.3 * fields.xScale.value
	zRelPos = fields.Y.value * 0.3 * fields.zScale.value
	area4XStart = math.floor(fields.area4Width.value / 2.0) * (0.3 * fields.xScale.value)
	area4ZStart = math.floor(fields.area4Height.value / 2.0) * (0.3 * fields.zScale.value)
	xCoord = xRelPos + xStart
	zCoord = zRelPos + zStart
	if (fields.DIR.value == 0)
	then
		zCoord = zCoord - 0.005
	elseif (DIR == 1)
	then
		xCoord = xCoord + 0.005
	elseif (DIR == 2)
	then
		zCoord = zCoord + 0.005
	elseif (DIR == 3)
	then
		xCoord = xCoord - 0.005
	end
	
	rotAngle = fields.DIR.value * -1.57
  }%
  translation %{=xCoord}% -0.03 %{=zCoord}%
  rotation 0 1 0 %{=rotAngle}%
  #name "%{=zStart}%,%{=area4ZStart}%,%{=zRelPos}%,"
  children [
	Solid {
		translation 0 0 0
		children [
			DEF Walls Group {
			  children [
		DEF CURVED Shape { 
appearance Appearance { 
material Material { 
diffuseColor 0.2 0.47 0.52 
} 
}
geometry IndexedFaceSet { 
coord Coordinate { 
point [
0.22320 0 0.02160,0.22320 0.06 0.02160,0.21600 0 0.02880,0.21600 0.06 0.02880,0.18720 0 0.02880,0.18720 0.06 0.02880,0.18000 0 0.03600,0.18000 0.06 0.03600,0.16560 0 0.03600,0.16560 0.06 0.03600,0.15840 0 0.04320,0.15840 0.06 0.04320,0.15120 0 0.04320,0.15120 0.06 0.04320,0.13680 0 0.05760,0.13680 0.06 0.05760,0.12960 0 0.05760,0.12960 0.06 0.05760,0.12240 0 0.06480,0.12240 0.06 0.06480,0.10800 0 0.06480,0.10800 0.06 0.06480,0.08640 0 0.08640,0.08640 0.06 0.08640,0.08640 0 0.10800,0.08640 0.06 0.10800,0.07920 0 0.11520,0.07920 0.06 0.11520,0.07920 0 0.12960,0.07920 0.06 0.12960,0.07200 0 0.13680,0.07200 0.06 0.13680,0.07200 0 0.21600,0.07200 0.06 0.21600,0.05760 0 0.23040,0.05760 0.06 0.23040,0.05760 0 0.23760,0.05760 0.06 0.23760,0.07200 0 0.25200,0.07200 0.06 0.25200,0.07200 0 0.25920,0.07200 0.06 0.25920,0.07920 0 0.26640,0.07920 0.06 0.26640,0.07920 0 0.27360,0.07920 0.06 0.27360,0.09360 0 0.28800,0.09360 0.06 0.28800,0.09360 0 0.30240,0.09360 0.06 0.30240,0.10080 0 0.30960,0.10080 0.06 0.30960,0.10080 0 0.31680,0.10080 0.06 0.31680,0.10800 0 0.32400,0.10800 0.06 0.32400,0.10800 0 0.33120,0.10800 0.06 0.33120,0.11520 0 0.33840,0.11520 0.06 0.33840,0.11520 0 0.35280,0.11520 0.06 0.35280,0.12960 0 0.36720,0.12960 0.06 0.36720,0.12960 0 0.38160,0.12960 0.06 0.38160,0.14400 0 0.39600,0.14400 0.06 0.39600,0.14400 0 0.40320,0.14400 0.06 0.40320,0.15120 0 0.41040,0.15120 0.06 0.41040,0.15120 0 0.41760,0.15120 0.06 0.41760,0.15840 0 0.42480,0.15840 0.06 0.42480,0.15840 0 0.43200,0.15840 0.06 0.43200,0.20160 0 0.47520,0.20160 0.06 0.47520,0.20880 0 0.47520,0.20880 0.06 0.47520,0.21600 0 0.48240,0.21600 0.06 0.48240,0.24480 0 0.48240,0.24480 0.06 0.48240,0.25200 0 0.48960,0.25200 0.06 0.48960,0.39600 0 0.48960,0.39600 0.06 0.48960,0.40320 0 0.48240,0.40320 0.06 0.48240,0.41040 0 0.48240,0.41040 0.06 0.48240,0.41760 0 0.47520,0.41760 0.06 0.47520,0.42480 0 0.47520,0.42480 0.06 0.47520,0.43200 0 0.46800,0.43200 0.06 0.46800,0.46080 0 0.46800,0.46080 0.06 0.46800,0.46080 0 0.46080,0.46080 0.06 0.46080,0.46800 0 0.45360,0.46800 0.06 0.45360,0.46800 0 0.44640,0.46800 0.06 0.44640,0.48960 0 0.42480,0.48960 0.06 0.42480,0.48960 0 0.41760,0.48960 0.06 0.41760,0.49680 0 0.41040,0.49680 0.06 0.41040,0.49680 0 0.35280,0.49680 0.06 0.35280,0.50400 0 0.34560,0.50400 0.06 0.34560,0.50400 0 0.27360,0.50400 0.06 0.27360,0.49680 0 0.26640,0.49680 0.06 0.26640,0.49680 0 0.24480,0.49680 0.06 0.24480,0.48960 0 0.23760,0.48960 0.06 0.23760,0.48960 0 0.22320,0.48960 0.06 0.22320,0.48240 0 0.21600,0.48240 0.06 0.21600,0.48240 0 0.20880,0.48240 0.06 0.20880,0.47520 0 0.20160,0.47520 0.06 0.20160,0.47520 0 0.19440,0.47520 0.06 0.19440,0.46800 0 0.18720,0.46800 0.06 0.18720,0.46800 0 0.18000,0.46800 0.06 0.18000,0.46080 0 0.17280,0.46080 0.06 0.17280,0.46080 0 0.16560,0.46080 0.06 0.16560,0.45360 0 0.15840,0.45360 0.06 0.15840,0.45360 0 0.15120,0.45360 0.06 0.15120,0.43920 0 0.13680,0.43920 0.06 0.13680,0.43920 0 0.12960,0.43920 0.06 0.12960,0.43200 0 0.12240,0.43200 0.06 0.12240,0.43200 0 0.11520,0.43200 0.06 0.11520,0.42480 0 0.10800,0.42480 0.06 0.10800,0.42480 0 0.09360,0.42480 0.06 0.09360,0.41760 0 0.08640,0.41760 0.06 0.08640,0.41760 0 0.07920,0.41760 0.06 0.07920,0.38880 0 0.05040,0.38880 0.06 0.05040,0.38160 0 0.05040,0.38160 0.06 0.05040,0.36720 0 0.03600,0.36720 0.06 0.03600,0.36000 0 0.03600,0.36000 0.06 0.03600,0.35280 0 0.02880,0.35280 0.06 0.02880,0.33840 0 0.02880,0.33840 0.06 0.02880,0.33120 0 0.02160,0.33120 0.06 0.02160,
]
}
coordIndex [
0,2,3,1,-1,2,4,5,3,-1,4,6,7,5,-1,6,8,9,7,-1,8,10,11,9,-1,10,12,13,11,-1,12,14,15,13,-1,14,16,17,15,-1,16,18,19,17,-1,18,20,21,19,-1,20,22,23,21,-1,22,24,25,23,-1,24,26,27,25,-1,26,28,29,27,-1,28,30,31,29,-1,30,32,33,31,-1,32,34,35,33,-1,34,36,37,35,-1,36,38,39,37,-1,38,40,41,39,-1,40,42,43,41,-1,42,44,45,43,-1,44,46,47,45,-1,46,48,49,47,-1,48,50,51,49,-1,50,52,53,51,-1,52,54,55,53,-1,54,56,57,55,-1,56,58,59,57,-1,58,60,61,59,-1,60,62,63,61,-1,62,64,65,63,-1,64,66,67,65,-1,66,68,69,67,-1,68,70,71,69,-1,70,72,73,71,-1,72,74,75,73,-1,74,76,77,75,-1,76,78,79,77,-1,78,80,81,79,-1,80,82,83,81,-1,82,84,85,83,-1,84,86,87,85,-1,86,88,89,87,-1,88,90,91,89,-1,90,92,93,91,-1,92,94,95,93,-1,94,96,97,95,-1,96,98,99,97,-1,98,100,101,99,-1,100,102,103,101,-1,102,104,105,103,-1,104,106,107,105,-1,106,108,109,107,-1,108,110,111,109,-1,110,112,113,111,-1,112,114,115,113,-1,114,116,117,115,-1,116,118,119,117,-1,118,120,121,119,-1,120,122,123,121,-1,122,124,125,123,-1,124,126,127,125,-1,126,128,129,127,-1,128,130,131,129,-1,130,132,133,131,-1,132,134,135,133,-1,134,136,137,135,-1,136,138,139,137,-1,138,140,141,139,-1,140,142,143,141,-1,142,144,145,143,-1,144,146,147,145,-1,146,148,149,147,-1,148,150,151,149,-1,150,152,153,151,-1,152,154,155,153,-1,154,156,157,155,-1,156,158,159,157,-1,158,160,161,159,-1,160,162,163,161,-1,162,164,165,163,-1,164,166,167,165,-1,166,168,169,167,-1,168,170,171,169,-1,170,172,173,171,-1,172,174,175,173,-1,174,176,177,175,-1,176,0,1,177,-1,1,3,5,7,9,11,13,15,17,19,21,23,25,27,29,31,33,35,37,39,41,43,45,47,49,51,53,55,57,59,61,63,65,67,69,71,73,75,77,79,81,83,85,87,89,91,93,95,97,99,101,103,105,107,109,111,113,115,117,119,121,123,125,127,129,131,133,135,137,139,141,143,145,147,149,151,153,155,157,159,161,163,165,167,169,171,173,175,177,-1,
]
}
}]
 }
 ]
 }
 ]
 name "Area4"
 }
 }